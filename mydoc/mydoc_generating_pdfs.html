<!DOCTYPE html>
  <head>

 <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="You can generate a PDF from your Jekyll project. You do this by creating a web version of your project that is printer friendly. You then use utility called ...">
<meta name="keywords" content="publishingsingle_sourcingcontent-types,  PDF, prince, prince XML, ant, xsl fo">
<title>Generating PDFs  | Manuals</title>
<link rel="stylesheet" type="text/css" href="../css/syntax.css">
<link rel="stylesheet" type="text/css" href="../css/font-awesome.min.css">
<!--<link rel="stylesheet" type="text/css" href="../css/bootstrap.min.css">-->
<link rel="stylesheet" type="text/css" href="../css/modern-business.css">
<link rel="stylesheet" type="text/css" href="../css/lavish-bootstrap.css">
<link rel="stylesheet" type="text/css" href="../css/customstyles.css">
<link rel="stylesheet" type="text/css" href="../css/theme-blue.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script src="../js/jquery.navgoco.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/anchor-js/2.0.0/anchor.min.js"></script>
<script src="../js/toc.js"></script>
<script src="../js/customscripts.js"></script>
<link rel="shortcut icon" href="../common_images/favicon.ico" type="image/x-icon">
<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->







 

<script>
  $(function () {
      $('[data-toggle="tooltip"]').tooltip()
  })
</script>



  </head>

<body>

   <!-- Navigation -->
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container topnavlinks">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <a class="fa fa-home fa-lg navbar-brand" href="home.html">&nbsp;<span class="projectTitle"> Data Analysis Tutorials</span></a>

        </div>
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <!-- entries without drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->
                



















                
                
                
                
                <li><a href="../mydoc/search.html">Search</a></li>
                
                
                
                
                
                <li><a href="https://github.com/tgirke/manuals" target="_blank">Github Repo</a></li>
                
                
                
                


                <!-- entries with drop-downs appear here -->
                <!-- conditional logic to control which topnav appears for the audience defined in the configuration file.-->

                <li class="dropdown">
                    
                    
                    
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">Resources<b class="caret"></b></a>
                    <ul class="dropdown-menu">
                        
                        
                        
                        <li><a href="https://cran.r-project.org/" target="_blank">CRAN</a></li>
                        
                        
                        
                        
                        
                        <li><a href="http://bioconductor.org/" target="_blank">Bioconductor</a></li>
                        
                        
                        
                        
                        
                        <li><a href="https://guides.github.com/activities/hello-world/" target="_blank">GitHub</a></li>
                        
                        
                        
                        
                        
                        <li><a href="http://jekyllrb.com/" target="_blank">Jekyll</a></li>
                        
                        
                        
                        
                        
                        <li><a href="http://girke.bioinformatics.ucr.edu/" target="_blank">Girke Lab</a></li>
                        
                        
                        
                        
                        
                        <li><a href="http://idratherbewriting.com/documentation-theme-jekyll/mydoc/home.html" target="_blank">Jekyll Doc Theme</a></li>
                        
                        
                        
                        

                    </ul>
                </li>
                
                


                <!-- special insertion -->

               
                
                
                <!-- Send feedback function -->
<script>
function SendLinkByMail(href) {
var subject= "Manuals feedback";
var body = "I have some feedback about the Generating PDFs page: ";
body += window.location.href;
body += "";
var uri = "mailto:?subject=";
uri += encodeURIComponent(subject);
uri += "&body=";
uri += encodeURIComponent(body);
window.location.href = uri;
}
</script>

<li><a href="javascript:(function()%7BSendLinkByMail()%3B%7D)()%3B" target="_blank"><i class="fa fa-envelope-o"></i> Feedback</a></li>



                <li>
                     <!--start search-->
                    <div id="search-demo-container">
                        <input type="text" id="search-input" placeholder="search...">
                        <ul id="results-container"></ul>
                    </div>
                    <script src="../js/jekyll-search.js" type="text/javascript"></script>
                    <script type="text/javascript">
                        SimpleJekyllSearch.init({
                            searchInput: document.getElementById('search-input'),
                            resultsContainer: document.getElementById('results-container'),
                            dataSource: '../search.json',
                            searchResultTemplate: '<li><a href="{url}" title="Generating PDFs">{title}</a></li>',
                        noResultsText: 'No results found.',
                                limit: 10,
                                fuzzy: true,
                        })
                    </script>
                     <!--end search-->
                </li>
            
        </div>
        <!-- /.container -->
</nav>


    <!-- Page Content -->
    <div class="container">
        <div class="col-lg-12">&nbsp;</div>


<!-- Content Row -->
<div class="row">
    <!-- Sidebar Column -->
    <div class="col-md-3">

        <script>

            $(document).ready(function() {
                // Initialize navgoco with default options
                $("#mysidebar").navgoco({
                    caretHtml: '',
                    accordion: true,
                    openClass: 'active', // open
                    save: false, // leave false or nav highlighting doesn't work right
                    cookie: {
                        name: 'navgoco',
                        expires: false,
                        path: '/'
                    },
                    slide: {
                        duration: 400,
                        easing: 'swing'
                    }
                });

                $("#collapseAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', false);
                });

                $("#expandAll").click(function(e) {
                    e.preventDefault();
                    $("#mysidebar").navgoco('toggle', true);
                });

            });

        </script>


        



















        <ul id="mysidebar" class="nav">

            <span class="siteTagline">Manuals</span>
            <span class="versionTagline">Under Construction!</span>

            
            
            
                
            
            <li><a href="#">Overview</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/home.html">Introduction</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_support.html">Support</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Introduction to R</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_1.html">1. Overview</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_2.html">2. R Package Repositories</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_3.html">3. Installation of R and Add-on Packages</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_4.html">4. Getting Around</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_5.html">5. Basic Syntax</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_6.html">6. Data Types</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_7.html">7. Data objects</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_8.html">8. Graphics example</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics_9.html">9. Session Info</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">R Basics</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_Rbasics.html">1. R Basics</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_getting_started.html">2. Build the default project</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_adding_new_projects.html">3. Add a new project</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_decide_on_attributes.html">4. Decide on your project's attributes</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_configuration_settings.html">5. Set the configuration options</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_conditions_file_customization.html">6. Customize the conditions file</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_configure_sidebar.html">7. Configure the sidebar</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_top_navigation.html">8. Configure the top navigation</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_url_generator_customization.html">9. Customize the URL generator</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_princexml_setup.html">10. Set up Prince XML</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_build_scripts.html">11. Configure the build scripts</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">R Graphics</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_pages.html">Pages</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_webstorm_text_editor.html">WebStorm Text Editor</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_conditional_logic.html">Conditional logic</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_content_reuse.html">Content reuse</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_collections.html">Collections</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">R Programming</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_sidebar_navigation.html">Sidebar navigation</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_tags.html">Tags</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_series.html">Series</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Clustering in R</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_adding_tooltips.html">Tooltips</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_alerts.html">Alerts</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_icons.html">Icons</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_images.html">Images</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_labels.html">Labels</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_hyperlinks.html">Links</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_navtabs.html">Navtabs</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_video_embeds.html">Video embeds</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_tables.html">Tables</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_syntax_highlighting.html">Syntax highlighting</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Vim-R-Tmux</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_commenting_on_files.html">Commenting on files</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Bioconductor</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_themes.html">Themes</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_build_arguments.html">Build arguments</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_link_validation.html">Link validation</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_title_checker.html">Check page title consistency</a></li>
                    

                    

                    
                    
                    
                    
                    <li class="active"><a href="../mydoc/mydoc_generating_pdfs.html">Generating PDFs</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_excluding_files.html">Excluding files</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_help_api.html">Help APIs and UI tooltips</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_search_configuration.html">Search configuration</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_iterm_profiles.html">iTerm profiles</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_push_build_to_server.html">Pushing builds to server</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_no_password_prompts_scp.html">Getting around the password prompts in SCP</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">NGS Analysis</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_kb_layout.html">Knowledge-base layout</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_scroll.html">Scroll layout</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_shuffle.html">Shuffle layout</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_faq.html">FAQ layout</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_glossary.html">Glossary layout</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">systemPipeR</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_1.html">1. Introduction</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_2.html">2. Getting Started</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_3.html">3. Workflow overview</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_4.html">4. Workflow templates</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_5.html">5. Version information</a></li>
                    

                    

                    
                    
                    
                    
                    <li><a href="../mydoc/mydoc_systemPipeR_6.html">6. References</a></li>
                    

                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Drug Discovery</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_tag_archives_overview.html">Tag archives overview</a></li>
                    

                    
                    
                    <li class="thirdlevel"><a href="#">Tag archive pages</a>
                        <ul>
                            
                            
                            
                            <li><a href="../mydoc/tag_getting_started.html">Getting started pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_formatting.html">Formatting pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_navigation.html">Navigation pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_content_types.html">Content types pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_publishing.html">Publishing pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_special_layouts.html">Special layout pages</a></li>
                            

                            
                            
                            
                            
                            <li><a href="../mydoc/tag_collaboration.html">Collaboration pages</a></li>
                            

                            
                            
                        </ul>
                    </li>
                    
                    

                    
                    
                </ul>
                
                
            
            <li><a href="#">Internal notes</a>
                <ul>
                    
                    
                    
                    <li><a href="../mydoc/mydoc_internal_notes.html">Administration of site</a></li>
                    

                    

                    
                    
                </ul>
                
                
                


                <!-- if you aren't using the accordion, uncomment this block:

                     <p class="external">
                         <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
                     </p>
                 -->

    </div>
    <!-- this highlights the active parent class in the navgoco sidebar. this is critical so that the parent expands when you're viewing a page. This must appear below the sidebar code above. Otherwise, if placed inside customscripts.js, the script runs before the sidebar code runs and the class never gets inserted.-->
    <script>$("li.active").parents('li').toggleClass("active");</script>


            <!-- Content Column -->
            <div class="col-md-9">
                
                <div class="post-header">
   <h1 class="post-title-main">Generating PDFs</h1>
</div>

<div class="post-content">

   
    <div class="summary">You can generate a PDF from your Jekyll project. You do this by creating a web version of your project that is printer friendly. You then use utility called Prince to iterate through the pages and create a PDF from them. It works quite well and gives you complete control to customize the PDF output through CSS, including page directives and dynamic tags from Prince.</div>
   

<!-- this handles the automatic toc. use ## for subheads to auto-generate the on-page minitoc. if you use html tags, you must supply an ID for the heading element in order for it to appear in the minitoc. -->
<script>
$( document ).ready(function() {
  // Handler for .ready() called.

$('#toc').toc({ minimumHeaders: 0, listType: 'ul', showSpeed: 0, headers: 'h2,h3,h4' });

/* this offset helps account for the space taken up by the floating toolbar. */
$('#toc').on('click', 'a', function() {
  var target = $(this.getAttribute('href'))
    , scroll_target = target.offset().top

  $(window).scrollTop(scroll_target - 10);
  return false
})
  
});
</script>


<div id="toc"></div>


<!--
    
    <a target="_blank" href="https://github.com/tgirke/manuals/tree/master/mydoc/" class="btn btn-default githubEditButton" role="button"><i class="fa fa-github fa-lg"></i> Edit me</a>
    
-->
  <h2 id="pdf-overview">PDF overview</h2>
<p>This process for creating a PDF relies on Prince XML to transform the HTML content into PDF. Prince costs about $500 per license. That might seem like a lot, but if you’re creating a PDF, you’re probably working for a company that sells a product, so you likely have access to some resources.</p>

<p>The basic approach is to generate a list of all pages that need to be added to the PDF, and then add leverage Prince to package them up into a PDF.</p>

<p>It may seem like the setup is somewhat cumbersome, but it doesn’t take long. Once you set it up, building a pdf is just a matter of running a couple of commands.</p>

<p>Also, creating a PDF this way gives you a lot more control and customization capabilities than with other methods for creating PDFs. If you know CSS, you can entirely customize the output.</p>

<h2 id="demo">Demo</h2>

<p>You can see an example of the finished product here:</p>

<p><a target="_blank" class="noCrossRef" href="files/"><button type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> PDF Download</button></a></p>

<h2 id="set-up-prince">1. Set up Prince</h2>

<p>Download and install <a href="http://www.princexml.com/doc/installing/">Prince</a>.</p>

<p>You can install a fully functional trial version. The only difference is that the title page will have a small Prince PDF watermark.</p>

<h2 id="create-a-new-configuration-file-for-each-of-your-pdf-targets">2. Create a new configuration file for each of your PDF targets</h2>

<p>The PDF configuration file will build on the settings in the regular configuration file but will some additional fields. Here’s the configuration file for the config_designers.yml file for this theme:</p>

<p><code>
destination: ../doc_outputs/mydoc/designers-pdf
url: "http://127.0.0.1:4010"
baseurl: "/mydoc/designers-pdf"
port: 4010
output: pdf
print_title: Jekyll theme for documentation — designers
print_subtitle: version 4.0
output: pdf
defaults:
  -
    scope:
      path: ""
      type: "pages"
    values:
      layout: "page_print"
      comments: true
      search: true
</code></p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note: </b> Although you're creating a PDF, you must still build an HTML web target before running Prince. Prince will pull from the HTML files and from the file-list for the TOC. Prince won't be able to find files if they simply have relative paths, such as /sample.html. The must have full URLs it can access &mdash; hence the <code>url</code> and <code>baseurl</code>. </div>

<p>Also note that the default page layout is <code>page_print</code>. This layout strips out all the sections that shouldn’t appear in the print PDF, such as the sidebar and top navigation bar.</p>

<p>Finally, note that there’s a <code>output: pdf</code> toggle in case you want to make some of your content unique to PDF output. For example, you could add conditional logic that checks whether <code>site.output</code> is <code>pdf</code> or <code>web</code>. If it’s <code>pdf</code>, then include information only for the PDF, and so on.</p>

<p>In the configuration file, customize the values for the <code>print_title</code> and <code>print_subtitle</code> that you want. These will appear on the title page of the PDF.</p>

<h2 id="make-sure-your-sidebardocyml-file-has-a-titlepagehtml-and-tocpagehtml">3. Make sure your sidebar_doc.yml file has a titlepage.html and tocpage.html</h2>

<p>There are two template pages in the root directory that are critical to the PDF:</p>

<ul>
  <li>titlepage.html</li>
  <li>tocpage.html</li>
</ul>

<p>These pages should appear in your sidebar YML file (in this theme, sidebar_doc.yml):</p>

<p><code>json
  - title:
    audience: writers, designers
    platform: all
    product: all
    version: all
    output: pdf
    type: frontmatter
    items:
    - title:
      url: /titlepage.html
      audience: writers, designers
      platform: all
      product: all
      version: all
      output: pdf
      type: frontmatter
    - title:
      url: /tocpage.html
      audience: writers, designers
      platform: all
      product: all
      version: all
      output: pdf
      type: frontmatter
</code></p>

<p>Leave these pages here in your sidebar. (The <code>output: pdf</code> property means they won’t appear in your online TOC because the conditional logic of the sidebar.html checks whether <code>web</code> is equal to <code>pdf</code> or not before including the item in the web version of the content.)</p>

<p>The code in the tocpage.html is nearly identical to that of the sidebar.html page except that it includes the <code>site</code> and <code>baseurl</code> for the URLs. This is essential for Prince to create the page numbers correctly with cross references.</p>

<p>There’s another file (in the root directory of the theme) that is critical to the PDF generation process: prince-file-list.txt. This file simply iterates through the items in your sidebar and creates a list of links. Prince will consume the list of links from prince-file-list.txt and create a running PDF that contains all of the pages listed, with appropriate cross references and styling for them all.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note: </b> If you have any files that you do not want to appear in the PDF, add <code>output: web</code> (rather than <code>output: pdf</code>) in the list of attributes in your sidebar. The prince-file-list.txt file that loops through the mydoc_sidebar.yml file to grab the URLs of each page that should appear in the PDF will skip over any items that do not list <code>output: pdf</code> in the item attributes. For example, you might not want your tag archives to appear in the PDF, but you probably will want to list them in the online help navigation. </div>

<h2 id="customize-your-headers-and-footers">4. Customize your headers and footers</h2>

<p>Open up the css/printstyles.css file and customize what you want for the headers and footers. At the very least, customize the email address (<code>youremail@domain.com</code>) that appears in the bottom left.</p>

<p>Exactly how the print styling works here is pretty cool. You don’t need to understand the rest of the content in this section unless you want to customize your PDFs to look different from what I’ve configured.</p>

<p>This style creates a page reference for a link:</p>

<p><code>css
a[href]::after {
    content: " (page " target-counter(attr(href), page) ")"
}
</code></p>

<p>You don’t want cross references for any link that doesn’t reference another page, so this style specifies that the content after should be blank:</p>

<p><code>css
a[href*="mailto"]::after, a[data-toggle="tooltip"]::after, a[href].noCrossRef::after {
    content: "";
}
</code></p>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip: </b> If you have a link to a file download, or some other link that shouldn't have a cross reference (such as link used in JavaScript for navtabs or collapsible sections, for example, add `noCrossRef` as a class to the link to avoid having it say "page 0" in the cross reference.</div>

<p>This style specifies that following links to web resources, the URL should be inserted instead of the page number:</p>

<p><code>css
a[href^="http:"]::after, a[href^="https:"]::after {
    content: " (" attr(href) ")";
}
</code></p>

<p>This style sets the page margins:</p>

<p>```css
@page {
    margin: 60pt 90pt 60pt 90pt;
    font-family: sans-serif;
    font-style:none;
    color: gray;</p>

<p>}
```</p>

<p>To set a specific style property for a particular page, you have to name the page. This allows Prince to identify the page.</p>

<p>First you add frontmatter to the page that specifies the type. For the titlepage.html, here’s the frontmatter:</p>

<h2 id="section">```</h2>
<p>type: title
—
```</p>

<p>For the tocpage, here’s the frontmatter:</p>

<h2 id="section-1">```</h2>
<p>type: frontmatter
—
```</p>

<p>For the index.html page, we have this type tag (among others):</p>

<h2 id="section-2">```</h2>
<p>type: first_page
—
```</p>

<p>The default_print.html layout will change the class of the <code>body</code> element based on the type value in the page’s frontmatter:</p>

<p><code>liquid
&lt;body class="{% if page.type == "title"%}title{% elsif page.type == "frontmatter" %}frontmatter{% elsif page.type == "first_page" %}first_page{% endif %} print"&gt;
</code></p>

<p>Now in the css/printstyles.css file, you can assign a page name based on a specific class:</p>

<p><code>css
body.title { page: title }
</code></p>

<p>This means that for content inside of <code>body class="title"</code>, we can style this page in our stylesheet using <code>@page title</code>.</p>

<p>Here’s how that title page is styled:</p>

<p><code>css
@page title {
    @top-left {
        content: " ";
    }
    @top-right {
        content: " "
    }
    @bottom-right {
        content: " ";
    }
    @bottom-left {
        content: " ";
    }
}
</code></p>

<p>As you can see, we don’t have any header or footer content, because it’s the title page.</p>

<p>For the tocpage.html, which has the <code>type: frontmatter</code>, this is specified in the stylesheet:</p>

<p>```css
body.frontmatter { page: frontmatter }
body.frontmatter {counter-reset: page 1}</p>

<p>@page frontmatter {
    @top-left {
        content: prince-script(guideName);
    }
    @top-right {
        content: prince-script(datestamp);
    }
    @bottom-right {
        content: counter(page, lower-roman);
    }
    @bottom-left {
        content: “youremail@domain.com”;   }
}
```</p>

<p>With <code>counter(page, lower-roman)</code>, we reset the page count to 1 so that the title page doesn’t start the count. Then we also add some header and footer info. The page numbers start counting in lower-roman numerals.</p>

<p>Finally, for the first page (which doesn’t have a specific name), we restart the counting to 1 again and this time use regular numbers.</p>

<p>```css
body.first_page {counter-reset: page 1}</p>

<p>h1 { string-set: doctitle content() }</p>

<p>@page {
    @top-left {
        content: string(doctitle);
        font-size: 11px;
        font-style: italic;
    }
    @top-right {
        content: prince-script(datestamp);
        font-size: 11px;
    }</p>

<pre><code>@bottom-right {
    content: "Page " counter(page);
    font-size: 11px;
}
@bottom-left {
    content: prince-script(guideName);
    font-size: 11px;
} } ```
</code></pre>

<p>You’ll see some other items in there such as <code>prince-script</code>. This means we’re using JavaScript to run some functions to dynamically generate that content. These JavaScript functions are located in the _includes/head_print.html:</p>

<p>```js
<script>
    Prince.addScriptFunc("datestamp", function() {
        return "PDF last generated: February 13, 2016";
    });
</script></p>

<script>
    Prince.addScriptFunc("guideName", function() {
        return " User Guide";
    });
</script>

<p>```</p>

<p>There are a couple of Prince functions that are default functions from Prince. This gets the heading title of the page:</p>

<p><code>js
        content: string(doctitle);
</code></p>

<p>This gets the current page:</p>

<p><code>js
        content: "Page " counter(page);
</code></p>

<p>Because the theme uses JavaScript in the CSS, you have to add the <code>--javascript</code> tag in the Prince command (detailed later on this page).</p>

<h2 id="customize-the-pdf-script">5. Customize the PDF script</h2>

<p>Open the mydoc_1_multiserve_pdf.sh file in the root directory and customize it for your specific configuration files.</p>

<p>echo ‘Killing all Jekyll instances’
kill -9 $(ps aux | grep ‘[j]ekyll’ | awk ‘{print $2}’)
clear</p>

<p>echo “Building PDF-friendly HTML site for Mydoc Writers …”
jekyll serve –detach –config configs/mydoc/config_writers.yml,configs/mydoc/config_writers_pdf.yml
echo “done”</p>

<p>echo “Building PDF-friendly HTML site for Mydoc Designers …”
jekyll serve –detach –config configs/mydoc/config_designers.yml,configs/mydoc/config_designers_pdf.yml
echo “done”</p>

<p>echo “All done serving up the PDF-friendly sites. Now let’s generate the PDF files from these sites.”
echo “Now run . mydoc_2_multibuild_pdf.sh”</p>

<p>Note that the first part kills all Jekyll instances. This way you won’t try to server Jekyll at a port that is already occupied.</p>

<p>The <code>jekyll serve</code> command serves up the HTML-friendly PDF configurations for our two projects. This web version is where Prince will go to get its content.</p>

<h2 id="configure-the-prince-scripts">6. Configure the Prince scripts</h2>

<p>Open up mydoc_2_multibuild_pdf.sh and look at the Prince commands:</p>

<p>```
# Doc Writers
echo “Building the Mydoc Writers PDF …”
prince –javascript –input-list=../doc_outputs/mydoc/writers-pdf/prince-file-list.txt -o mydoc/files/mydoc_writers_pdf.pdf;
echo “done”</p>

<h1 id="doc-designers">Doc Designers</h1>
<p>echo “Building Mydoc Designers PDF …”
prince –javascript –input-list=../doc_outputs/mydoc/designers-pdf/prince-file-list.txt -o mydoc/files/mydoc_designers_pdf.pdf;
echo “done”</p>

<p>echo “All done building the PDFs!”
echo “Now build the web outputs: . mydoc_3_multibuild_web.sh”
```</p>

<p>This script issues a command to the Prince utility. JavaScript is enabled (<code>--javascript</code>), and we tell it exactly where to find the list of files (<code>--input-list</code>) — just point to the prince-file-list.txt file. Then we tell it where and what to output (<code>-o</code>).</p>

<p>Make sure that the path to the prince-file-list.txt is correct. For the output directory, I like to output the PDF file into my project’s source (into the files folder). Then when I build the web output, the PDF is included and something I can refer to.</p>

<h2 id="add-a-download-button-for-the-pdf">7. Add a download button for the PDF</h2>

<p>You can add a download button for your PDF using some Bootstrap button code:</p>

<p><code>html
&lt;a target="_blank" class="noCrossRef" href="files/mydoc_designers_pdf.pdf"&gt;&lt;button type="button" class="btn btn-default" aria-label="Left Align"&gt;&lt;span class="glyphicon glyphicon-download-alt" aria-hidden="true"&gt;&lt;/span&gt; PDF Download&lt;/button&gt;&lt;/a&gt;
</code></p>

<p>Here’s what that looks like:</p>

<p><a target="_blank" class="noCrossRef" href="files/mydoc_designers_pdf.pdf"><button type="button" class="btn btn-default" aria-label="Left Align"><span class="glyphicon glyphicon-download-alt" aria-hidden="true"></span> PDF Download</button></a></p>

<p>The <code>{{site.pdf_file_name}}</code>{% raw %} is set in the configuration file.</p>

<p>{{site.data.alerts.note}} If you don’t like the style of the PDFs, just adjust the styles in the printstyles.css file.{{site.data.alerts.end}}</p>

<h2 id="javascript-conflicts">JavaScript conflicts</h2>

<p>If you have JavaScript on any of your pages, Prince will note errors in Terminal like this:</p>

<p><code>
error: TypeError: value is not an object
</code></p>

<p>However, the PDF will still build.</p>

<p>You need to conditionalize out any JavaScript from your PDF web output before building your PDFs. Make sure that the PDF configuration files have the <code>output: pdf</code> property.</p>

<p>Then surround the JavaScript with conditional tags like this:</p>

<p>{% raw %}
<code>
{% unless site.output == "pdf" %}
javascript content here ...
{% endunless %}
</code></p>

<p>For more detail about using <code>unless</code> in conditional logic, see <a href="../mydoc/mydoc_conditional_logic.html">Conditional logic</a>. What this code means is “run this code unless this value is the case.”</p>

<h2 id="overriding-bootstrap-print-styles">Overriding Bootstrap Print Styles</h2>

<p>The theme relies on Bootstrap’s CSS for styling. However, for print media, Bootstrap applies the following style:</p>

<p><code>
@media print{*,:after,:before{color:#000!important;text-shadow:none!important;background:0 0!important;-webkit-box-shadow:none!important;box-shadow:none!important}
</code>
This is minified, but basically the <code>*</code> (asterisk) means select all, and applied the color #000 (black). As a result, the Bootstrap style strips out all color from the PDF (for Bootstrap elements).</p>

<p>This is problematic for code snippets that have syntax highlighting. I decided to remove this de-coloring from the print output. I commented out the Bootstrap style:</p>

<p><code>
@media print{*,:after,:before{/*color:#000!important;*/text-shadow:none!important;/*background:0 0!important*/;-webkit-box-shadow:none!important;box-shadow:none!important}
</code></p>

<p>If you update Bootrap, make sure you make this edit. (Sorry, admittedly I couldn’t figure out how to simply overwrite the <code>*</code> selector with a later style.)</p>

<p>I did, however, remove the color from the alerts and lighten the background shading for <code>pre</code> elements. The printstyles.css has this setting.</p>


<div class="tags">
    
    <b>Tags: </b>
    


















    
    
    <a href="tag_publishing.html" class="btn btn-default navbar-btn cursorNorm" role="button">publishing</a>
    
    
    
    <a href="tag_single_sourcing.html" class="btn btn-default navbar-btn cursorNorm" role="button">single_sourcing</a>
    
    
    
    
    
</div>



</div>



<footer>
            <div class="row">
                <div class="col-lg-12 footer">
               &copy;2016 Thomas Girke. All rights reserved. <br />
<p>Page last updated:</span> November 30, 2015<br/> Site last generated: Feb 13, 2016 <br />
<p><img src="../common_images/company_logo.png/></p>
                </div>
            </div>
</footer>

            </div><!-- /.row -->

    </div>    <!-- /.container -->

</body>


</html>

